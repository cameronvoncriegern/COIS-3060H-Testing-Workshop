<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Meal Planner ‚Äî SQA Workshop</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "Segoe UI", sans-serif;
      background: #f7f8fc;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 48px 16px;
      color: #1a202c;
    }

    h1 { font-size: 1.6rem; margin-bottom: 8px; color: #2b6cb0; }
    p.subtitle { color: #718096; margin-bottom: 32px; font-size: 0.9rem; }

    .tabs { display: flex; gap: 4px; margin-bottom: 0; }

    .tab-btn {
      padding: 10px 24px;
      border: 2px solid #cbd5e0;
      border-bottom: none;
      background: #e2e8f0;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      font-size: 0.95rem;
      color: #4a5568;
      transition: background 0.15s;
    }

    .tab-btn.active {
      background: white;
      color: #2b6cb0;
      font-weight: 600;
      border-color: #bee3f8;
    }

    .tab-panel {
      display: none;
      background: white;
      border: 2px solid #bee3f8;
      border-radius: 0 8px 8px 8px;
      padding: 24px;
      width: 360px;
      min-height: 200px;
    }

    .tab-panel.active { display: block; }

    .tab-panel h2 { font-size: 1rem; margin-bottom: 14px; color: #2d3748; }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      font-size: 0.95rem;
    }

    .checkbox-item input[type="checkbox"] {
      width: 18px; height: 18px;
      cursor: pointer; accent-color: #2b6cb0;
    }

    button#generate-btn {
      margin-top: 20px;
      padding: 12px 40px;
      background: #2b6cb0;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    button#generate-btn:hover { background: #2c5282; }

    #message {
      margin-top: 16px;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      display: none;
      width: 360px;
      text-align: center;
    }

    #message.success {
      background: #ebf8ff; color: #2b6cb0; border: 1.5px solid #bee3f8;
    }

    #message.error {
      background: #fff5f5; color: #c53030; border: 1.5px solid #fed7d7;
    }
  </style>
</head>
<body>

  <h1>üçΩ Meal Planner</h1>
  <p class="subtitle">Pick at least one item from each section, then generate your meal.</p>

  <div class="tabs">
    <button class="tab-btn active" data-tab="starters" id="tab-starters">Starters</button>
    <button class="tab-btn" data-tab="mains" id="tab-mains">Mains</button>
    <button class="tab-btn" data-tab="desserts" id="tab-desserts">Desserts</button>
  </div>

  <div class="tab-panel active" id="panel-starters">
    <h2>Choose your starter(s)</h2>
    <label class="checkbox-item"><input type="checkbox" id="starter-soup" value="Soup" /> Soup</label>
    <label class="checkbox-item"><input type="checkbox" id="starter-salad" value="Salad" /> Salad</label>
    <label class="checkbox-item"><input type="checkbox" id="starter-bread" value="Garlic Bread" /> Garlic Bread</label>
    <label class="checkbox-item"><input type="checkbox" id="starter-wings" value="Chicken Wings" /> Chicken Wings</label>
  </div>

  <div class="tab-panel" id="panel-mains">
    <h2>Choose your main(s)</h2>
    <label class="checkbox-item"><input type="checkbox" id="main-pasta" value="Pasta" /> Pasta</label>
    <label class="checkbox-item"><input type="checkbox" id="main-burger" value="Burger" /> Burger</label>
    <label class="checkbox-item"><input type="checkbox" id="main-pizza" value="Pizza" /> Pizza</label>
    <label class="checkbox-item"><input type="checkbox" id="main-steak" value="Steak" /> Steak</label>
  </div>

  <div class="tab-panel" id="panel-desserts">
    <h2>Choose your dessert(s)</h2>
    <label class="checkbox-item"><input type="checkbox" id="dessert-cake" value="Cake" /> Cake</label>
    <label class="checkbox-item"><input type="checkbox" id="dessert-icecream" value="Ice Cream" /> Ice Cream</label>
    <label class="checkbox-item"><input type="checkbox" id="dessert-brownie" value="Brownie" /> Brownie</label>
    <label class="checkbox-item"><input type="checkbox" id="dessert-fruit" value="Fruit Salad" /> Fruit Salad</label>
  </div>

  <button id="generate-btn">Generate My Meal</button>
  <div id="message"></div>

  <script>
    // Flakiness: reversing items about 1 in 2 runs
    if (window._reverseItems === undefined) {
      window._reverseItems = Math.random() < 0.5;
    }

    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('panel-' + btn.dataset.tab).classList.add('active');
      });
    });

    // Generate button
    document.getElementById('generate-btn').addEventListener('click', () => {
      const starters  = [...document.querySelectorAll('#panel-starters input:checked')].map(i => i.value);
      const mains     = [...document.querySelectorAll('#panel-mains input:checked')].map(i => i.value);
      const desserts  = [...document.querySelectorAll('#panel-desserts input:checked')].map(i => i.value);

      const msg = document.getElementById('message');

      // BUG: desserts are not checked ‚Äî fix this in Issue #1
      if (starters.length === 0 || mains.length === 0 || desserts.length === 0){
        msg.textContent = '‚ö† Please select at least one item from each section.';
        msg.className = 'error';
        msg.style.display = 'block';
        return;
      }

      const allItems = [...starters, ...mains, ...desserts];
      if (window._reverseItems) allItems.reverse();
      msg.textContent = '‚úÖ Your meal: ' + allItems.join(', ');
      msg.className = 'success';
      msg.style.display = 'block';
    });
  </script>

</body>
</html>
